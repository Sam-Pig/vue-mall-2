{"version":3,"sources":["webpack:///static/js/cart.d1fdeb4d93ea59521ff1.js","webpack:///./src/modules/js/api.js?4c58***","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js?c08e","webpack:///./src/modules/js/mixin.js?53fa*","webpack:///./src/modules/js/cartService.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topList","subList","rank","searchList","details","deal","cartAdd","cartRemove","cartMremove","cartReduce","cartLists","cartUpdate","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","110","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_base_css__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_js_api_js__","__WEBPACK_IMPORTED_MODULE_7_velocity_animate__","__WEBPACK_IMPORTED_MODULE_7_velocity_animate___default","__WEBPACK_IMPORTED_MODULE_8_js_cartService_js__","__WEBPACK_IMPORTED_MODULE_9_js_fetch_js__","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","arr","push","price","number","removeLists","created","getList","methods","_this","a","post","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","edit","shopIndex","item","i","reduce","id","add","remove","goodIndex","removeList","removeConfirm","_this2","_removeData","splice","removeShop","ids","findIndex","start","e","startX","changedTouches","clientX","end","console","log","target","endX","left","$refs","mixins","18","fetch","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","__WEBPACK_IMPORTED_MODULE_1_axios___default","status","catch","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_axios__","6","mixin","filters","currency","priceStr","indexOf","split","substr","74","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__","__WEBPACK_IMPORTED_MODULE_3_js_api_js__","Cart","78","exports","79","80"],"mappings":"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","file":"static/js/cart.d1fdeb4d93ea59521ff1.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topList: '/category/topList',\n  subList: '/category/subList',\n  rank: '/category/rank',\n  searchList: '/search/list',\n  details: '/goods/details',\n  deal: '/goods/deal',\n  cartAdd: '/cart/add',\n  cartRemove: '/cart/remove',\n  cartMremove: '/cart/mremove',\n  cartReduce: '/cart/reduce',\n  cartLists: '/cart/list',\n  cartUpdate: '/cart/update',\n  addressLists: '/address/list',\n  addressAdd: '/address/add',\n  addressRemove: '/address/remove',\n  addressUpdate: '/address/update',\n  addressSetDefault: '/address/setDefault'\n\n  //开发环境和真实环境的切换\n  // let host = 'http://rapapi.org/mockjsdata/23334'\n};var host = 'http://rapapi.org/mockjsdata/24170';\n\nfor (var key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key];\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 110:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_js_mixin_js__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_velocity_animate__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_js_fetch_js__ = __webpack_require__(18);\n\n\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_3_vue__[\"default\"]({\n  el: '.container',\n  data: {\n    lists: null,\n    total: 0,\n    editingShop: null,\n    editingShopIndex: -1,\n    removePopup: false,\n    removeData: null,\n    removeMsg: ''\n  },\n  computed: {\n    allSelected: {\n      get: function get() {\n        if (this.lists && this.lists.length) {\n          return this.lists.every(function (shop) {\n            return shop.checked;\n          });\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        this.lists.forEach(function (shop) {\n          shop.checked = newVal;\n          shop.goodsList.forEach(function (good) {\n            good.checked = newVal;\n          });\n        });\n      }\n    },\n    allRemoveSelected: {\n      get: function get() {\n        if (this.editingShop) {\n          return this.editingShop.removeChecked;\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        if (this.editingShop) {\n          this.editingShop.removeChecked = newVal;\n          this.editingShop.goodsList.forEach(function (good) {\n            good.removeChecked = newVal;\n          });\n        }\n      }\n    },\n    selectLists: function selectLists() {\n      if (this.lists && this.lists.length) {\n        var arr = [];\n        var total = 0;\n        this.lists.forEach(function (shop) {\n          shop.goodsList.forEach(function (good) {\n            if (good.checked) {\n              arr.push(good);\n              total += good.price * good.number;\n            }\n          });\n        });\n        this.total = total;\n        return arr;\n      }\n      return [];\n    },\n    removeLists: function removeLists() {\n      if (this.editingShop) {\n        var arr = [];\n        this.editingShop.goodsList.forEach(function (good) {\n          if (good.removeChecked) {\n            arr.push(good);\n          }\n        });\n        return arr;\n      }\n      return [];\n    }\n  },\n  created: function created() {\n    this.getList();\n  },\n\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartLists).then(function (res) {\n        var lists = res.data.cartList;\n        lists.forEach(function (shop) {\n          shop.checked = true;\n          shop.removeChecked = false;\n          shop.editing = false;\n          shop.editingMsg = '编辑';\n          shop.goodsList.forEach(function (good) {\n            good.checked = true;\n            good.removeChecked = false;\n          });\n        });\n        _this.lists = lists;\n      });\n    },\n    selectGood: function selectGood(shop, good) {\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      good[attr] = !good[attr];\n      shop[attr] = shop.goodsList.every(function (good) {\n        return good[attr];\n      });\n    },\n    selectShop: function selectShop(shop) {\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      shop[attr] = !shop[attr];\n      shop.goodsList.forEach(function (good) {\n        good[attr] = shop[attr];\n      });\n    },\n    selectAll: function selectAll() {\n      var attr = this.editingShop ? 'allRemoveSelected' : 'allSelected';\n      this[attr] = !this[attr];\n    },\n    edit: function edit(shop, shopIndex) {\n      shop.editing = !shop.editing;\n      shop.editingMsg = shop.editing ? '完成' : '编辑';\n      this.lists.forEach(function (item, i) {\n        if (shopIndex !== i) {\n          item.editing = false;\n          item.editingMsg = shop.editing ? '' : '编辑';\n        }\n      });\n      this.editingShop = shop.editing ? shop : null;\n      this.editingShopIndex = shop.editing ? shopIndex : -1;\n    },\n    reduce: function reduce(good) {\n      if (good.number === 1) return;\n      // axios.post(url.cartReduce, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number--\n      // })\n      __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__[\"a\" /* default */].reduce(good.id).then(function (res) {\n        good.number--;\n      });\n    },\n    add: function add(good) {\n      // axios.post(url.cartAdd, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number++\n      // })\n      __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__[\"a\" /* default */].add(good.id).then(function (res) {\n        good.number++;\n      });\n    },\n    remove: function remove(shop, shopIndex, good, goodIndex) {\n      this.removePopup = true;\n      this.removeData = { shop: shop, shopIndex: shopIndex, good: good, goodIndex: goodIndex };\n      this.removeMsg = '确定要删除该商品吗？';\n    },\n    removeList: function removeList() {\n      this.removePopup = true;\n      this.removeMsg = '\\u786E\\u5B9A\\u5C06\\u6240\\u9009 ' + this.removeLists.length + ' \\u4E2A\\u5546\\u54C1\\u5220\\u9664\\uFF1F';\n    },\n    removeConfirm: function removeConfirm() {\n      var _this2 = this;\n\n      if (this.removeMsg === '确定要删除该商品吗？') {\n        var _removeData = this.removeData,\n            shop = _removeData.shop,\n            shopIndex = _removeData.shopIndex,\n            good = _removeData.good,\n            goodIndex = _removeData.goodIndex;\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartRemove, {\n          id: good.id\n        }).then(function (res) {\n          shop.goodsList.splice(goodIndex, 1);\n          if (!shop.goodsList.length) {\n            _this2.lists.splice(shopIndex, 1);\n            _this2.removeShop();\n          }\n          _this2.removePopup = false;\n        });\n      } else {\n        var ids = [];\n        this.removeLists.forEach(function (good) {\n          ids.push(good.id);\n        });\n        __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartMremove, {\n          ids: ids\n        }).then(function (res) {\n          var arr = [];\n          _this2.editingShop.goodsList.forEach(function (good) {\n            var index = _this2.removeLists.findIndex(function (item) {\n              return item.id == good.id;\n            });\n            if (index === -1) {\n              arr.push(good);\n            }\n          });\n          if (arr.length) {\n            _this2.editingShop.goodsList = arr;\n          } else {\n            _this2.lists.splice(_this2.editingShopIndex, 1);\n            _this2.removeShop();\n          }\n          _this2.removePopup = false;\n        });\n      }\n    },\n    removeShop: function removeShop() {\n      this.editingShop = null;\n      this.editingShopIndex = -1;\n      this.lists.forEach(function (shop) {\n        shop.editing = false;\n        shop.editingMsg = '编辑';\n      });\n    },\n    start: function start(e, good) {\n      good.startX = e.changedTouches[0].clientX;\n    },\n    end: function end(e, shopIndex, good, goodIndex) {\n      console.log(e.target);\n      var endX = e.changedTouches[0].clientX;\n      var left = '0';\n      if (good.startX - endX > 100) {\n        left = '-60px';\n      }\n      if (endX - good.startX > 100) {\n        left = '0px';\n      }\n      __WEBPACK_IMPORTED_MODULE_7_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + goodIndex], {\n        left: left\n      });\n    }\n  },\n  mixins: [__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__[\"a\" /* default */]]\n});\n\n// import Mock from 'mockjs'\n// let Random = Mock.Random\n\n// let data = Mock.mock({\n//   'cartList|3' :[{\n//     'goodsList|1-2' : [{\n//       id: Random.int(10000,100000),\n//       image: Mock.mock('@img(90x90,@color)')\n//     }]\n//   }]\n// })\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n\n\n\nfunction fetch(url, data) {\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(url, data).then(function (res) {\n      var status = res.data.status;\n      // if(status === 200) {\n      //   resolve(res)\n      // }\n      // if(status === 300) {\n      //   location.href = 'login.html'\n      //   resolve(res)\n      // }\n      // reject(res)\n\n      resolve(res);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (fetch);\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar mixin = {\n  filters: {\n    currency: function currency(price) {\n      var priceStr = '' + price;\n      if (priceStr.indexOf('.') > -1) {\n        var arr = priceStr.split('.');\n        return arr[0] + '.' + (arr[1] + '0').substr(0, 2);\n      } else {\n        return priceStr + '.00';\n      }\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mixin);\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_fetch_js__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api_js__ = __webpack_require__(0);\n\n\n\n\n\nvar Cart = function () {\n  function Cart() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Cart);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Cart, null, [{\n    key: 'add',\n    value: function add(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartAdd, {\n        id: id,\n        number: 1\n      });\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartReduce, {\n        id: id,\n        number: 1\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(arr) {\n      var ids = [];\n      arr.forEach(function (good) {\n        ids.push(good.id);\n      });\n    }\n  }]);\n\n  return Cart;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cart);\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[110]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.d1fdeb4d93ea59521ff1.js","let url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topList: '/category/topList',\n  subList: '/category/subList',\n  rank: '/category/rank',\n  searchList: '/search/list',\n  details: '/goods/details',\n  deal: '/goods/deal',\n  cartAdd: '/cart/add',\n  cartRemove: '/cart/remove',\n  cartMremove: '/cart/mremove',\n  cartReduce: '/cart/reduce',\n  cartLists: '/cart/list',\n  cartUpdate: '/cart/update',\n  addressLists: '/address/list',\n  addressAdd: '/address/add',\n  addressRemove: '/address/remove',\n  addressUpdate: '/address/update',\n  addressSetDefault: '/address/setDefault'\n}\n\n//开发环境和真实环境的切换\n// let host = 'http://rapapi.org/mockjsdata/23334'\nlet host = 'http://rapapi.org/mockjsdata/24170'\n\nfor (let key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key]\n  }\n}\n\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import './cart_base.css'\nimport './cart_trade.css'\nimport './cart.css'\n\nimport Vue from 'vue'\nimport mixin from 'js/mixin.js'\nimport axios from 'axios'\nimport url from 'js/api.js'\nimport Volecity from 'velocity-animate'\nimport Cart from 'js/cartService.js'\nimport fetch from 'js/fetch.js'\n\nnew Vue({\n  el: '.container',\n  data: {\n    lists: null,\n    total: 0,\n    editingShop: null,\n    editingShopIndex: -1,\n    removePopup: false,\n    removeData: null,\n    removeMsg: ''\n  },\n  computed: {\n    allSelected: {\n      get() {\n        if(this.lists&&this.lists.length){\n          return this.lists.every(shop => {\n            return shop.checked\n          })\n        }\n        return false\n      },\n      set(newVal) {\n        this.lists.forEach(shop => {\n          shop.checked = newVal\n          shop.goodsList.forEach(good => {\n            good.checked = newVal\n          })\n        })\n      }\n    },\n    allRemoveSelected: {\n      get() {\n        if(this.editingShop) {\n          return this.editingShop.removeChecked\n        }\n        return false\n      },\n      set(newVal) {\n        if(this.editingShop) {\n          this.editingShop.removeChecked = newVal\n          this.editingShop.goodsList.forEach(good => {\n            good.removeChecked = newVal\n          })\n        }\n      }\n    },\n    selectLists() {\n      if(this.lists&&this.lists.length){\n        let arr = []\n        let total = 0\n        this.lists.forEach(shop => {\n          shop.goodsList.forEach(good => {\n            if(good.checked) {\n              arr.push(good)\n              total += good.price * good.number\n            }\n          })\n        })\n        this.total = total\n        return arr\n      }\n      return []\n    },\n    removeLists() {\n      if(this.editingShop) {\n        let arr = []\n        this.editingShop.goodsList.forEach(good => {\n          if(good.removeChecked) {\n            arr.push(good)\n          }\n        })\n        return arr\n      }\n      return []\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      axios.post(url.cartLists).then(res => {\n        let lists = res.data.cartList\n        lists.forEach(shop => {\n          shop.checked = true\n          shop.removeChecked = false\n          shop.editing = false\n          shop.editingMsg = '编辑'\n          shop.goodsList.forEach(good => {\n            good.checked = true\n            good.removeChecked = false\n          })\n        })\n        this.lists = lists\n      })\n    },\n    selectGood(shop,good) {\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\n      good[attr] = !good[attr]\n      shop[attr] = shop.goodsList.every(good => {\n        return good[attr]\n      })\n    },\n    selectShop(shop) {\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\n      shop[attr] = !shop[attr]\n      shop.goodsList.forEach(good => {\n        good[attr] = shop[attr]\n      })\n    },\n    selectAll() {\n      let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\n      this[attr] = !this[attr]\n    },\n    edit(shop,shopIndex) {\n      shop.editing = !shop.editing\n      shop.editingMsg = shop.editing ? '完成' : '编辑'\n      this.lists.forEach((item,i) => {\n        if(shopIndex !== i) {\n          item.editing = false\n          item.editingMsg = shop.editing ? '' : '编辑'\n        }\n      })\n      this.editingShop = shop.editing ? shop : null\n      this.editingShopIndex = shop.editing ? shopIndex : -1\n    },\n    reduce(good) {\n      if(good.number===1) return\n      // axios.post(url.cartReduce, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number--\n      // })\n      Cart.reduce(good.id).then(res => {\n        good.number--\n      })\n    },\n    add(good) {\n      // axios.post(url.cartAdd, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number++\n      // })\n      Cart.add(good.id).then(res => {\n        good.number++\n      })\n    },\n    remove(shop,shopIndex,good,goodIndex) {\n      this.removePopup = true\n      this.removeData = {shop,shopIndex,good,goodIndex}\n      this.removeMsg = '确定要删除该商品吗？'\n    },\n    removeList() {\n      this.removePopup = true\n      this.removeMsg = `确定将所选 ${this.removeLists.length} 个商品删除？`\n    },\n    removeConfirm() {\n      if(this.removeMsg === '确定要删除该商品吗？'){\n        let {shop,shopIndex,good,goodIndex} = this.removeData\n        fetch(url.cartRemove,{\n          id: good.id\n        }).then(res => {\n          shop.goodsList.splice(goodIndex, 1)\n          if(!shop.goodsList.length) {\n            this.lists.splice(shopIndex, 1)\n            this.removeShop()\n          }\n          this.removePopup  = false\n        })\n      }else {\n        let ids = []\n        this.removeLists.forEach(good => {\n          ids.push(good.id)\n        })\n        axios.post(url.cartMremove, {\n          ids\n        }).then(res => {\n          let arr = []\n          this.editingShop.goodsList.forEach(good => {\n            let index = this.removeLists.findIndex(item => {\n              return item.id == good.id\n            })\n            if(index === -1) {\n              arr.push(good)\n            }\n          })\n          if(arr.length) {\n            this.editingShop.goodsList = arr\n          } else {\n            this.lists.splice(this.editingShopIndex, 1)\n            this.removeShop()\n          }\n          this.removePopup  = false\n        })\n      }\n    },\n    removeShop() {\n      this.editingShop = null\n      this.editingShopIndex = -1\n      this.lists.forEach(shop => {\n        shop.editing = false\n        shop.editingMsg = '编辑'\n      })\n    },\n    start(e,good) {\n      good.startX = e.changedTouches[0].clientX\n    },\n    end(e,shopIndex,good,goodIndex) {\n      console.log(e.target)\n      let endX = e.changedTouches[0].clientX\n      let left = '0'\n      if(good.startX - endX > 100) {\n        left = '-60px'\n      }\n      if(endX - good.startX > 100) {\n        left = '0px'\n      }\n      Volecity(this.$refs[`goods-${shopIndex}-${goodIndex}`], {\n        left\n      })\n    }\n  },\n  mixins: [mixin]\n})\n\n\n// import Mock from 'mockjs'\n// let Random = Mock.Random\n\n// let data = Mock.mock({\n//   'cartList|3' :[{\n//     'goodsList|1-2' : [{\n//       id: Random.int(10000,100000),\n//       image: Mock.mock('@img(90x90,@color)')\n//     }]\n//   }]\n// })\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\n\nfunction fetch(url,data) {\n  return new Promise((resolve,reject) => {\n    axios.post(url,data).then(res => {\n      let status = res.data.status\n      // if(status === 200) {\n      //   resolve(res)\n      // }\n      // if(status === 300) {\n      //   location.href = 'login.html'\n      //   resolve(res)\n      // }\n      // reject(res)\n\n      resolve(res)\n    }).catch(error => {\n      reject(error)\n    })\n  })\n}\n\nexport default fetch\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js","let mixin = {\n  filters: {\n    currency(price) {\n      let priceStr = '' + price\n      if (priceStr.indexOf('.') > -1) {\n        let arr = priceStr.split('.')\n        return arr[0] + '.' + (arr[1] + '0').substr(0, 2)\n      } else {\n        return priceStr + '.00'\n      }\n    }\n  }\n}\n\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import fetch from 'js/fetch.js'\nimport url from 'js/api.js'\n\nclass Cart {\n  static add(id) {\n    return fetch(url.cartAdd,{\n      id,\n      number: 1\n    })\n  }\n\n  static reduce(id) {\n    return fetch(url.cartReduce, {\n      id,\n      number: 1\n    })\n  }\n\n  static remove(arr) {\n    let ids = []\n    arr.forEach(good => {\n      ids.push(good.id)\n    })\n  }\n}\n\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js"],"sourceRoot":""}